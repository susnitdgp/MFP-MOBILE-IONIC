{"version":3,"sources":["../../src/pages/ldap-login/ldap-login.module.ts","../../src/pages/ldap-login/ldap-login.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LdapLoginPage } from './ldap-login';\n\n@NgModule({\n  declarations: [\n    LdapLoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LdapLoginPage),\n  ],\n})\nexport class LdapLoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ldap-login/ldap-login.module.ts","import { Component } from \"@angular/core\";\r\nimport {\r\n  IonicPage,\r\n  NavController,\r\n  NavParams,\r\n  AlertController,\r\n} from \"ionic-angular\";\r\nimport { AuthHandlerProvider } from \"../../providers/auth-handler/auth-handler\";\r\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\r\nimport { LoaderProvider } from \"../../providers/loader/loader\";\r\nimport { AlertProvider } from \"../../providers/alert/alert\";\r\nimport { LoggerProvider } from \"../../providers/logger/logger\";\r\nimport { DomSanitizer } from \"@angular/platform-browser\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-ldap-login\",\r\n  templateUrl: \"ldap-login.html\",\r\n})\r\nexport class LdapLoginPage {\r\n  passwordInputType = \"password\";\r\n  form: FormGroup;\r\n  formErrorMessages = {\r\n    username: [\r\n      {\r\n        type: \"required\",\r\n        code: 701,\r\n      },\r\n      { type: \"pattern\", code: 722 },\r\n      {\r\n        type: \"minlength\",\r\n        code: 724,\r\n      },\r\n      {\r\n        type: \"maxlength\",\r\n        code: 724,\r\n      },\r\n    ],\r\n    password: [\r\n      {\r\n        type: \"required\",\r\n        code: 702,\r\n      },\r\n      { type: \"pattern\", code: 723 },\r\n      {\r\n        type: \"minlength\",\r\n        code: 723,\r\n      },\r\n      {\r\n        type: \"maxlength\",\r\n        code: 723,\r\n      },\r\n    ],\r\n  };\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public authHandler: AuthHandlerProvider,\r\n    private loader: LoaderProvider,\r\n    private alert: AlertProvider,\r\n    private logger: LoggerProvider,\r\n    private alertCtrl: AlertController,\r\n    private sanitizer: DomSanitizer\r\n  ) {\r\n    this.authHandler.setLoginSuccessCallback((user) => {\r\n      this.logger.debug(user);\r\n      if (user.user && user.user.id) {\r\n        if (this.navCtrl.getActive().name == \"LdapLoginPage\") {\r\n          this.loader.dismissLoading();\r\n          // if (this.navCtrl.canGoBack()) {\r\n          //   this.navCtrl.pop();\r\n          // }\r\n          // else {\r\n          this.navCtrl.setRoot(\"OtpLoginPage\", user.user);\r\n          // }\r\n        } else {\r\n          this.logger.debug(\"Login state\");\r\n        }\r\n      } else {\r\n        this.alert.showErrorMessage(706);\r\n      }\r\n    });\r\n\r\n    this.authHandler.setHandleChallengeCallback((challenge) => {\r\n      this.loader.dismissLoading();\r\n      if (challenge.errorCode) {\r\n        this.alert.showErrorMessage(challenge.errorCode);\r\n      } else {\r\n        this.alert.showErrorMessage(799);\r\n      }\r\n      if (this.navCtrl.getActive().name != \"LdapLoginPage\") {\r\n        this.navCtrl.push(LdapLoginPage);\r\n      }\r\n    });\r\n\r\n    this.authHandler.setLoginFailureCallback((error) => {\r\n      logger.debug(error);\r\n      this.loader.dismissLoading();\r\n      if (error.status) {\r\n        this.alert.showErrorMessage(error.status);\r\n      } else if (error.errorCode) {\r\n        this.alert.showErrorMessage(error.errorCode);\r\n      } else {\r\n        this.alert.showErrorMessage(799);\r\n      }\r\n      if (this.navCtrl.getActive().name != \"LdapLoginPage\") {\r\n        this.navCtrl.setRoot(LdapLoginPage);\r\n      }\r\n    });\r\n\r\n    this.form = new FormGroup({\r\n      username: new FormControl(\"\", [\r\n        Validators.required,\r\n        Validators.minLength(6),\r\n        Validators.maxLength(30),\r\n        Validators.pattern(\"[a-zA-Z0-9.]*\"),\r\n      ]),\r\n      password: new FormControl(\"\", [\r\n        Validators.required,\r\n        Validators.minLength(4),\r\n        Validators.maxLength(30),\r\n        Validators.pattern(\"[a-zA-Z0-9!@#$%^&*]*\"),\r\n      ]),\r\n    });\r\n  }\r\n\r\n  processForm() {\r\n    let username = this.form.value.username;\r\n    let password = this.form.value.password;\r\n    if (username == \"\" && password == \"\") {\r\n      this.alert.showErrorMessage(700);\r\n      return;\r\n    }\r\n    if (this.form.valid) {\r\n      let credentials = {\r\n        username: username,\r\n        password: password,\r\n      };\r\n      this.loader.showLoading();\r\n      this.authHandler.login(credentials);\r\n    } else {\r\n      this.formErrorMessages.username.forEach((validation) => {\r\n        if (this.form.get(\"username\").hasError(validation.type)) {\r\n          this.alert.showErrorMessage(validation.code);\r\n        }\r\n      });\r\n      this.formErrorMessages.password.forEach((validation) => {\r\n        if (this.form.get(\"password\").hasError(validation.type)) {\r\n          this.alert.showErrorMessage(validation.code);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  togglePasswordInputType(input) {\r\n    this.passwordInputType =\r\n      this.passwordInputType == \"password\" ? \"text\" : \"password\";\r\n\r\n    input.setFocus();\r\n  }\r\n\r\n  showContactUsPopup() {\r\n    let contactUsPopup = this.alertCtrl.create({\r\n      subTitle: \"For any issue may please contact\",\r\n      message: <any>this.getContactUsContent(),\r\n      buttons: [\r\n        {\r\n          text: \"OK\",\r\n          handler: () => {\r\n            contactUsPopup.dismiss();\r\n            return false;\r\n          },\r\n        },\r\n      ],\r\n    });\r\n    contactUsPopup.present();\r\n  }\r\n\r\n  getContactUsContent() {\r\n    return this.sanitizer.bypassSecurityTrustHtml(\r\n      \"<ion-row><ion-icon name='phone'></ion-icon>  Mobile: <a href='tel:1800-102-5970'>1800-102-5970</a></ion-row> <br /><br /><ion-row><ion-icon name='mail'></ion-icon> Email: <a href='mailto:ecm@ntpc.co.in'>ecm@ntpc.co.in</a></ion-row>\"\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ldap-login/ldap-login.ts"],"sourceRoot":""}