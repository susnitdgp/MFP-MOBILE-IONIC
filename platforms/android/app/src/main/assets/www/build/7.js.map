{"version":3,"sources":["../../src/pages/otp-login/otp-login.module.ts","../../src/pages/otp-login/otp-login.ts"],"names":[],"mappings":"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","file":"7.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { OtpLoginPage } from './otp-login';\n\n@NgModule({\n  declarations: [\n    OtpLoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(OtpLoginPage),\n  ],\n})\nexport class OtpLoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/otp-login/otp-login.module.ts","import { Component } from \"@angular/core\";\r\nimport { IonicPage, NavController, NavParams, Platform } from \"ionic-angular\";\r\nimport { AdapterCallsProvider } from \"../../providers/adapter-calls/adapter-calls\";\r\nimport { LoggerProvider } from \"../../providers/logger/logger\";\r\nimport { LoaderProvider } from \"../../providers/loader/loader\";\r\nimport { AuthHandlerProvider } from \"../../providers/auth-handler/auth-handler\";\r\nimport { FormGroup, FormControl, Validators } from \"@angular/forms\";\r\nimport { AlertProvider } from \"../../providers/alert/alert\";\r\n\r\ndeclare var window;\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-otp-login\",\r\n  templateUrl: \"otp-login.html\",\r\n})\r\nexport class OtpLoginPage {\r\n  userId;\r\n  otpForm: FormGroup;\r\n  otp: any = [\"\", \"\", \"\", \"\"];\r\n  timerText;\r\n  numberOfResendOTPTries = 0;\r\n  authenticatedUser: any;\r\n  disableButtons = true;\r\n  resendOTPButtonText: string = \"Resend OTP\";\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private adapter: AdapterCallsProvider,\r\n    private authHandler: AuthHandlerProvider,\r\n    private logger: LoggerProvider,\r\n    private loader: LoaderProvider,\r\n    private alert: AlertProvider,\r\n    private platform: Platform\r\n  ) {\r\n    if (this.platform.is(\"android\")) {\r\n      this.startListeningSMS();\r\n    }\r\n\r\n    this.authenticatedUser = navParams.data;\r\n    this.userId = this.authenticatedUser.id;\r\n    this.otpForm = new FormGroup({\r\n      otp1: new FormControl(\"\", [\r\n        Validators.required,\r\n        Validators.pattern(\"[0-9]\"),\r\n        Validators.minLength(1),\r\n        Validators.maxLength(1),\r\n      ]),\r\n      otp2: new FormControl(\"\", [\r\n        Validators.required,\r\n        Validators.pattern(\"[0-9]\"),\r\n        Validators.minLength(1),\r\n        Validators.maxLength(1),\r\n      ]),\r\n      otp3: new FormControl(\"\", [\r\n        Validators.required,\r\n        Validators.pattern(\"[0-9]\"),\r\n        Validators.minLength(1),\r\n        Validators.maxLength(1),\r\n      ]),\r\n      otp4: new FormControl(\"\", [\r\n        Validators.required,\r\n        Validators.pattern(\"[0-9]\"),\r\n        Validators.minLength(1),\r\n        Validators.maxLength(1),\r\n      ]),\r\n    });\r\n  }\r\n\r\n  startListeningSMS() {\r\n    try {\r\n      const smsRetriever: any = window.cordova.plugins.smsRetriever;\r\n      // smsRetriever[\"getAppHash\"](\r\n      //   (res) => {\r\n      //     // this.appHashString = res;\r\n      //     console.log(\"App Hash\", res);\r\n      //   },\r\n      //   (err) => {\r\n      //     console.warn(err);\r\n      //   }\r\n      // );\r\n      // SMSReceive.startWatch(\r\n      //   () => {\r\n      //     document.addEventListener(\"onSMSArrive\", (sms: any) => {\r\n      //       const incomingSMS = sms.data;\r\n      //       this.processSMS(incomingSMS);\r\n      //     });\r\n      //   },\r\n      //   () => {\r\n      //     this.logger.debug(\"watch start failed\");\r\n      //   }\r\n      // );\r\n      // const smsRetriever: any = window.cordova.plugins.smsRetriever;\r\n      smsRetriever[\"startWatching\"](\r\n        (res) => {\r\n          this.processSMS(res);\r\n        },\r\n        (err) => {\r\n          console.warn(err);\r\n        }\r\n      );\r\n    } catch (error) {\r\n      this.logger.debug(error);\r\n    }\r\n  }\r\n\r\n  stopListeningSMS() {\r\n    // try {\r\n    //   SMSReceive.stopWatch(\r\n    //     () => {\r\n    //       this.logger.debug(\"watch stopped\");\r\n    //     },\r\n    //     () => {\r\n    //       this.logger.debug(\"watch stop failed\");\r\n    //     }\r\n    //   );\r\n    // } catch (error) {\r\n    //   this.logger.debug(error);\r\n    // }\r\n  }\r\n\r\n  processSMS(sms) {\r\n    try {\r\n      const smsBody = sms.Message;\r\n      const otp = smsBody.slice(4, 8);\r\n      if (!isNaN(otp)) {\r\n        const otpArray = otp.split(\"\");\r\n        this.otp = otpArray;\r\n        this.validateOTP(true);\r\n      }\r\n    } catch (error) {\r\n      this.logger.debug(\"Error detecting OTP\");\r\n    }\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.startTimer();\r\n    this.startResendOTPTimer();\r\n  }\r\n\r\n  validateOTP(preValidated) {\r\n    if (!preValidated && !this.otpForm.valid) {\r\n      this.alert.showErrorMessage(719);\r\n      return;\r\n    }\r\n\r\n    let otp = this.otp.join(\"\");\r\n    if (otp && otp.length == 4 && !isNaN(otp)) {\r\n      let params = {\r\n        userId: this.userId,\r\n        otp: otp,\r\n      };\r\n      this.loader.showLoading();\r\n      this.adapter\r\n        .processPostRequest(\"/adapters/otp/resource/validateOTP\", params)\r\n        .then(\r\n          (response) => {\r\n            if (response.isValid) {\r\n              this.stopListeningSMS();\r\n              if (response.userConsent) {\r\n                this.logger.debug(this.navCtrl.getActive().name);\r\n                if (this.navCtrl.getActive().name == \"OtpLoginPage\") {\r\n                  this.navCtrl.popToRoot();\r\n                  this.navCtrl.setRoot(\"InboxPage\", this.authenticatedUser);\r\n                }\r\n              } else {\r\n                const navData = {\r\n                  termsAndConditions: response.termsAndConditionsData,\r\n                  user: this.authenticatedUser,\r\n                  showButtons: true,\r\n                };\r\n                this.navCtrl.popToRoot();\r\n                this.navCtrl.setRoot(\"TermsAndConditionsPage\", navData);\r\n              }\r\n            } else {\r\n              this.loader.dismissLoading();\r\n              this.alert.showErrorMessage(707);\r\n            }\r\n          },\r\n          (error) => {\r\n            this.loader.dismissLoading();\r\n            this.logger.debug(error);\r\n          }\r\n        );\r\n    } else {\r\n      if (otp.length != 4) {\r\n        this.alert.showErrorMessage(703);\r\n      } else {\r\n        this.alert.showErrorMessage(719);\r\n      }\r\n    }\r\n  }\r\n\r\n  otpInputController(event, nextElement, prevElement) {\r\n    // if (event.target.value.length > 1) {\r\n    //   let val = event.target.value.toString().slice(0, -1);\r\n    //   event.target.value = parseInt(val);\r\n    // }\r\n    if (event.target.value.length < 1 && prevElement) {\r\n      prevElement.setFocus();\r\n    } else if (nextElement && event.target.value.length > 0) {\r\n      nextElement.setFocus();\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  goBack() {\r\n    this.authHandler.logout();\r\n    this.navCtrl.setRoot(\"LdapLoginPage\");\r\n  }\r\n\r\n  resendOTP() {\r\n    this.loader.showLoading();\r\n    this.adapter\r\n      .callUnprotectedAdapterResource(\r\n        \"/adapters/MobilitySMSAdapter/resource/sendOTP?empnum=\" + this.userId\r\n      )\r\n      .then(\r\n        (response) => {\r\n          this.loader.dismissLoading();\r\n          this.numberOfResendOTPTries++;\r\n          this.startResendOTPTimer();\r\n          this.alert.showErrorMessage(717);\r\n        },\r\n        (error) => {\r\n          this.loader.dismissLoading();\r\n          this.alert.showErrorMessage(718);\r\n          this.logger.debug(error);\r\n        }\r\n      );\r\n  }\r\n\r\n  startTimer() {\r\n    let timerSeconds = 300;\r\n    let timer = setInterval(() => {\r\n      this.timerText = this.getMinutesAndSeconds(timerSeconds);\r\n      if (timerSeconds < 1) {\r\n        clearInterval(timer);\r\n        if (this.navCtrl.getActive().name == \"OtpLoginPage\") {\r\n          this.goBack();\r\n        }\r\n      }\r\n      timerSeconds--;\r\n    }, 1000);\r\n  }\r\n\r\n  getMinutesAndSeconds(inputSeconds) {\r\n    const secNum = parseInt(inputSeconds.toString(), 10);\r\n    const hours = Math.floor(secNum / 3600);\r\n    const minutes = Math.floor((secNum - hours * 3600) / 60);\r\n    const seconds = secNum - hours * 3600 - minutes * 60;\r\n    let minutesString = \"\";\r\n    let secondsString = \"\";\r\n    minutesString = minutes < 10 ? \"0\" + minutes : minutes.toString();\r\n    secondsString = seconds < 10 ? \"0\" + seconds : seconds.toString();\r\n    return minutesString + \":\" + secondsString;\r\n  }\r\n\r\n  startResendOTPTimer() {\r\n    this.disableButtons = true;\r\n    let timerSeconds = 20;\r\n    let timer = setInterval(() => {\r\n      this.resendOTPButtonText = \"Resend OTP in \" + timerSeconds + \" sec\";\r\n      if (timerSeconds < 1) {\r\n        clearInterval(timer);\r\n        this.disableButtons = false;\r\n        this.resendOTPButtonText = \"Resend OTP\";\r\n      }\r\n      timerSeconds--;\r\n    }, 1000);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/otp-login/otp-login.ts"],"sourceRoot":""}